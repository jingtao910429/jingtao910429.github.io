<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[GitHub+Hexo+Next博客搭建实战及优化]]></title>
    <url>%2F2018%2F10%2F18%2FGitHub%2BHexo%2BNext%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E5%AE%9E%E6%88%98%E5%8F%8A%E4%BC%98%E5%8C%96%2F</url>
    <content type="text"><![CDATA[我的个人博客链接：jingtaotao.top本文是针对有一定编程基础的Coder，采坑完善后的文章。 本文描述概念1、文中 yourname 指的是GitHub账号，比如笔者的 jingtao910429。2、文中 主目录 指的是 Hexo 目录。3、文中 站点配置文件 指的是 主目录 下的 _config.yml 文件。4、文中 主题目录 指的是 themes/next 目录。(Next配置主题时会涉及,如果是yilia主题，则是themes/yilia,其他主题同上)5、文中 主题配置文件 指的是 themes 目录下的 _config.yml 文件。 博客搭建基础Node.jswindows https://nodejs.org/en/ 下载安装。Linux 执行命令 sudo apt-get install nodejs Gitwindows https://github.com/waylau/git-for-win 安装。Linux 执行命令 sudo apt-get install git Hexo首先列出常用 Hexo 命令：12345$ hexo generate # 启动本地服务器$ hexo server # 在浏览器输入 http://localhost:4000/就可以看见网页和模板了$ hexo new &quot;文章名&quot; #新建文章$ hexo new page &quot;页面名&quot; #新建页面$ hexo deploy #发布到远端 对应的简写命令：1234hexo n == hexo newhexo g == hexo generatehexo s == hexo serverhexo d == hexo deploy 新建文件夹，安装 Hexo。进入Hexo安装目录，依次执行如下命令： npm install hexo-cli -g hexo init 初始化网站，此时，安装目录为 Hexo 主目录。也可以使用 hexo init blogCategory, 注意 blogCategory是Hexo安装目录下的二级目录，如果使用二级目录安装 Hexo 那么 Hexo 的主目录就是二级目录。 hexo s 浏览器打开 http://localhost:4000/ 预览网页。 GitHub配置部署GitHub创建Repositories创建如图的GitHub.io仓库，注意：yourname.github.io中yourname和Github上对应，如下图： 将主目录下_config.yml中的deploy修改如下：12345deploy: type: git repo: git@github.com:yourname/yourname.github.io.git #这里的网址填你自己的，这里使用的SSH地址，也可以使用https branch: master SSH执行命令 ssh-keygen -t rsa -C &quot;Github的注册邮箱地址&quot; enter即可。秘钥生成完毕，会得到两个文件id_rsa和id_rsa.pub, vim id_rsa.pub打开文件，copy。进入 https://github.com/settings/ssh 将复制的内容粘贴到Key的输入框，title任意。 hexo deploy 出错修正，多数博客未涉及解决方案 deploy not found： git解决方案：执行 npm install hexo-deployer-git --save 语句后， 再部署即可。该语句执行后可能会出现12ERROR Local hexo not foundERROR Try running: &apos;npm install hexo --save&apos; 导致这个原因为在自己的博客文件夹中,.gitignore文件中添加了node_modules/,导致更新的时候,这个文件夹被忽略，没有被更新上去。 解决方案: 1、 cmd进入主目录 2、 执行 npm install 3、 执行 hexo server 4、 执行成功后，再到博客下的git中执行 Hexo 命令可以执行成功。 添加主题Next主题添加cd 到主目录下，然后执行。1git clone https://github.com/iissnan/hexo-theme-next themes/next 编辑站点配置文件中theme属性，将其由landscape改为next。在主目录执行部署Hexo指令：123456// 清理缓存hexo clean// 生成文件hexo generate// 部署hexo deploy yilia主题添加添加yilia主题，可以参考 我是如何利用Github Pages搭建起我的博客，细数一路的坑 主题优化主题具体优化可参考 Hexo搭建的GitHub博客之优化其中有几个地方对于Coder来说比较重要的笔者没有涉及到: 1、标题之间间隔，行间隔2、背景圆角3、Gemini透明度设置4、代码Copy功能5、代码折叠6、gitalk集成中比较容易出错的地方 针对以上问题，下面列出解决方案 标题之间间隔，行间隔在Next主题下，是没有对post-body下的p, h1, h2, h3, h4, h5, h6, ul设置相应的样式，所以产生user agent stylesheet浏览器默认样式表,所以打开\themes\next\source\css\_custom\custom.styl下添加代码：1234.post-body p, h1, h2, h3, h4, h5, h6, ul &#123; margin-block-start: 0.3em; margin-block-end: 0.3em;&#125; 打开\themes\next\source\css\_custom\components\post\post-expand.styl修改代码：1234567891011121314151617181920212223242526272829303132333435.posts-expand .post-body &#123; +desktop() &#123; text-align: justify; &#125; h2, h3, h4, h5, h6 &#123; //此处可以控制top和bottom的值，来符合页面要求 padding-top: 10px; //padding-bottom: 5px; .header-anchor&#123; float: right; margin-left: 10px; color: $grey-light; border-bottom-style: none; visibility: hidden; &amp;:hover&#123; color: inherit; &#125; &#125; &amp;:hover .header-anchor&#123; visibility: visible; &#125; &#125; ul li &#123; list-style: circle; &#125; img &#123; box-sizing: border-box; margin: auto; padding: 3px; border: 1px solid $gray-lighter; &#125;&#125; 背景圆角打开\themes\next\source\css\_variables\Gemini.styl下添加代码：12$border-radius-inner = 10px //圆角设置$border-radius = 10px //圆角设置 Gemini透明度设置主要是通过修改CSS样式来实现1、文章部分 themes/next/source/css/_schemes/Gemini/index.styl123456.post-block &#123; padding: $content-desktop-padding; background: rgba(255,255,255,0.7); box-shadow: $box-shadow-inner; border-radius: $border-radius-inner;&#125; 2、阅读全文按钮 /themes/next/source/css/_variables/Pisces.styl123456$btn-default-radius = 2px$btn-default-bg = rgba(255,255,255,0.5)$btn-default-color = $text-color$btn-default-border-color = $text-color$btn-default-hover-color = white$btn-default-hover-bg = $black-deep 3、分页部分 /themes/next/source/css/_schemes/Gemini/index.styl1234567891011.pagination &#123; .prev, .next, .page-number &#123; margin-bottom: initial; top: initial; &#125; margin: sboffset 0 0; background: rgba(255,255,255,0.7); box-shadow: $box-shadow; border-radius: $border-radius; padding: 10px 0 10px;&#125; 4、评论区部分 /themes/next/source/css/_schemes/Gemini/index.styl12345678.comments &#123; padding: $content-desktop-padding; margin: initial; margin-top: sboffset; background: rgba(255,255,255,0.7); box-shadow: $box-shadow; border-radius: $border-radius;&#125; 5、侧栏菜单界面 /themes/next/source/css/_schemes/Pisces/_layout.styl123456789101112131415161718192021222324.header-inner &#123; position: absolute; top: 0; overflow: hidden; padding: 0; width: $sidebar-desktop; background: rgba(255,255,255,0.7); box-shadow: $box-shadow-inner; border-radius: $border-radius-inner; +desktop-large() &#123; .container &amp; &#123; width: $sidebar-desktop; &#125; &#125; +tablet() &#123; position: relative; width: auto; border-radius: initial; &#125; +mobile() &#123; position: relative; width: auto; border-radius: initial; &#125;&#125; 6、个人资料界面 /themes/next/source/css/_schemes/Pisces/_sidebar.styl1234567891011121314.sidebar-inner &#123;//padding: 20px 10px 0; box-sizing: border-box; width: $sidebar-desktop; color: $text-color; background: rgba(255,255,255,0.7); box-shadow: $box-shadow; border-radius: $border-radius; if (hexo-config('motion.enable') and hexo-config('motion.transition.sidebar')) &#123; opacity: 0; &#125; &amp;.affix &#123; position: fixed; top: $sidebar-offset; &#125; 其他Next主题请参考修改。 代码Copy功能参考 HEXO优化之（二）—-添加复制功能 功能添加出现Clipboard is not defined错误，需要修改一下Clipboard的源码，123var Clipboard = fuction()&#123;....&#125;;//在Clipboard定义后面增加$.Clipboard = Clipboard;//这是我增加的代码 使用时代码1234567891011121314var clipboard = new $.Clipboard('.btn', &#123; text: function() &#123; //var ue = UM.getEditor('txtContent',&#123;&#125;); //ue.queryCommandValue( 'insertcode' ); return $("#"+domId).val(); &#125;&#125;);clipboard.on('success', function(e) &#123; //console.log(e); e.clearSelection();&#125;);clipboard.on('error', function(e) &#123; //console.log(e);&#125;); 代码折叠主要参考 Hexo Next博客添加折叠块功能添加折叠代码块 Gitalk集成中比较容易出错的地方主要参考 Hexo NexT主题中集成gitalk评论系统基本可以顺利集成下来，但是有几个概念笔者并没有阐述清楚： Homepage URL 和 Authorization callback URL的设置问题这两个值对应的是站点地址，也就是对外的访问网址，比如 https://jingtao910429.github.io,如果绑定了域名信息，则是个人域名，比如 https://jingtaotao.top 主目录配置中的repo设置repo 对应的是GitHub上的repo地址，比如 jingtao910429.github.io]]></content>
      <categories>
        <category>博客搭建</category>
      </categories>
      <tags>
        <tag>博客搭建</tag>
        <tag>Hexo+Next</tag>
      </tags>
  </entry>
</search>
